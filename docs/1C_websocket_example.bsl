// –ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ 1C —Å WebSocket –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
// –í–µ—Ä—Å–∏—è: 1.0
// –î–∞—Ç–∞: 2025-01-27

#–û–±–ª–∞—Å—Ç—å –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ–ú–æ–¥—É–ª—è

–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –í–µ–±–°–æ–∫–µ—Ç;
–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –°–æ—Å—Ç–æ—è–Ω–∏–µ–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è;
–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –ê–¥—Ä–µ—Å–°–µ—Ä–≤–µ—Ä–∞;
–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¢–∏–ø–ü–æ–¥–ø–∏—Å–∫–∏;
–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –°—á–µ—Ç—á–∏–∫–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π;
–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π;

#–ö–æ–Ω–µ—Ü–û–±–ª–∞—Å—Ç–∏

#–û–±–ª–∞—Å—Ç—å –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏–°–æ–±—ã—Ç–∏–π–§–æ—Ä–º—ã

–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –ü—Ä–∏–°–æ–∑–¥–∞–Ω–∏–∏–ù–∞–°–µ—Ä–≤–µ—Ä–µ(–û—Ç–∫–∞–∑, –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è–û–±—Ä–∞–±–æ—Ç–∫–∞)
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
    –°–æ—Å—Ç–æ—è–Ω–∏–µ–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è = "–û—Ç–∫–ª—é—á–µ–Ω–æ";
    –ê–¥—Ä–µ—Å–°–µ—Ä–≤–µ—Ä–∞ = "ws://localhost:8000";
    –¢–∏–ø–ü–æ–¥–ø–∏—Å–∫–∏ = "all"; // –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π device_id
    –°—á–µ—Ç—á–∏–∫–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π = 0;
    –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π = 5;
    
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Ñ–æ—Ä–º—ã
    –≠–ª–µ–º–µ–Ω—Ç—ã–§–æ—Ä–º—ã.–ê–¥—Ä–µ—Å–°–µ—Ä–≤–µ—Ä–∞.–ó–Ω–∞—á–µ–Ω–∏–µ = –ê–¥—Ä–µ—Å–°–µ—Ä–≤–µ—Ä–∞;
    –≠–ª–µ–º–µ–Ω—Ç—ã–§–æ—Ä–º—ã.–¢–∏–ø–ü–æ–¥–ø–∏—Å–∫–∏.–ó–Ω–∞—á–µ–Ω–∏–µ = –¢–∏–ø–ü–æ–¥–ø–∏—Å–∫–∏;
    –û–±–Ω–æ–≤–∏—Ç—å–°–æ—Å—Ç–æ—è–Ω–∏–µ–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞();
    
–ö–æ–Ω–µ—Ü–ü—Ä–æ—Ü–µ–¥—É—Ä—ã

–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –ü—Ä–∏–ó–∞–∫—Ä—ã—Ç–∏–∏(–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ–†–∞–±–æ—Ç—ã)
    
    // –ó–∞–∫—Ä—ã—Ç–∏–µ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Ñ–æ—Ä–º—ã
    –ï—Å–ª–∏ –í–µ–±–°–æ–∫–µ—Ç <> –ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –¢–æ–≥–¥–∞
        –ü–æ–ø—ã—Ç–∫–∞
            –í–µ–±–°–æ–∫–µ—Ç.–ó–∞–∫—Ä—ã—Ç—å();
        –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
            // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏
        –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
    –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
    
–ö–æ–Ω–µ—Ü–ü—Ä–æ—Ü–µ–¥—É—Ä—ã

#–ö–æ–Ω–µ—Ü–û–±–ª–∞—Å—Ç–∏

#–û–±–ª–∞—Å—Ç—å –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏–°–æ–±—ã—Ç–∏–π–≠–ª–µ–º–µ–Ω—Ç–æ–≤–®–∞–ø–∫–∏–§–æ—Ä–º—ã

–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è–öWebSocket(–ö–æ–º–∞–Ω–¥–∞)
    
    –ê–¥—Ä–µ—Å–°–µ—Ä–≤–µ—Ä–∞ = –≠–ª–µ–º–µ–Ω—Ç—ã–§–æ—Ä–º—ã.–ê–¥—Ä–µ—Å–°–µ—Ä–≤–µ—Ä–∞.–ó–Ω–∞—á–µ–Ω–∏–µ;
    –¢–∏–ø–ü–æ–¥–ø–∏—Å–∫–∏ = –≠–ª–µ–º–µ–Ω—Ç—ã–§–æ—Ä–º—ã.–¢–∏–ø–ü–æ–¥–ø–∏—Å–∫–∏.–ó–Ω–∞—á–µ–Ω–∏–µ;
    
    –ï—Å–ª–∏ –ü—É—Å—Ç–∞—è–°—Ç—Ä–æ–∫–∞(–ê–¥—Ä–µ—Å–°–µ—Ä–≤–µ—Ä–∞) –¢–æ–≥–¥–∞
        –ü–æ–∫–∞–∑–∞—Ç—å–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ(, "–£–∫–∞–∂–∏—Ç–µ –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞");
        –í–æ–∑–≤—Ä–∞—Ç;
    –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
    
    –ï—Å–ª–∏ –ü—É—Å—Ç–∞—è–°—Ç—Ä–æ–∫–∞(–¢–∏–ø–ü–æ–¥–ø–∏—Å–∫–∏) –¢–æ–≥–¥–∞
        –ü–æ–∫–∞–∑–∞—Ç—å–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ(, "–£–∫–∞–∂–∏—Ç–µ —Ç–∏–ø –ø–æ–¥–ø–∏—Å–∫–∏");
        –í–æ–∑–≤—Ä–∞—Ç;
    –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
    
    –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è–ö–°–µ—Ä–≤–µ—Ä—É();
    
–ö–æ–Ω–µ—Ü–ü—Ä–æ—Ü–µ–¥—É—Ä—ã

–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –û—Ç–∫–ª—é—á–∏—Ç—å—Å—è–û—ÇWebSocket(–ö–æ–º–∞–Ω–¥–∞)
    
    –û—Ç–∫–ª—é—á–∏—Ç—å—Å—è–û—Ç–°–µ—Ä–≤–µ—Ä–∞();
    
–ö–æ–Ω–µ—Ü–ü—Ä–æ—Ü–µ–¥—É—Ä—ã

–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –û—á–∏—Å—Ç–∏—Ç—å–ñ—É—Ä–Ω–∞–ª(–ö–æ–º–∞–Ω–¥–∞)
    
    –≠–ª–µ–º–µ–Ω—Ç—ã–§–æ—Ä–º—ã.–ñ—É—Ä–Ω–∞–ª–°–æ–æ–±—â–µ–Ω–∏–π.–û—á–∏—Å—Ç–∏—Ç—å();
    
–ö–æ–Ω–µ—Ü–ü—Ä–æ—Ü–µ–¥—É—Ä—ã

#–ö–æ–Ω–µ—Ü–û–±–ª–∞—Å—Ç–∏

#–û–±–ª–∞—Å—Ç—å –°–ª—É–∂–µ–±–Ω—ã–µ–ü—Ä–æ—Ü–µ–¥—É—Ä—ã–ò–§—É–Ω–∫—Ü–∏–∏

// –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ WebSocket —Å–µ—Ä–≤–µ—Ä—É
–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è–ö–°–µ—Ä–≤–µ—Ä—É()
    
    –ü–æ–ø—ã—Ç–∫–∞
        
        // –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
        –í–µ–±–°–æ–∫–µ—Ç = –ù–æ–≤—ã–π –í–µ–±–°–æ–∫–µ—Ç;
        
        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
        –í–µ–±–°–æ–∫–µ—Ç.–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å–û–±—Ä–∞–±–æ—Ç—á–∏–∫–°–æ–±—ã—Ç–∏—è("–ü—Ä–∏–ü–æ–ª—É—á–µ–Ω–∏–∏–°–æ–æ–±—â–µ–Ω–∏—è", –≠—Ç–æ—Ç–û–±—ä–µ–∫—Ç, "–û–±—Ä–∞–±–æ—Ç–∫–∞–°–æ–æ–±—â–µ–Ω–∏—è–í–µ–±–°–æ–∫–µ—Ç");
        –í–µ–±–°–æ–∫–µ—Ç.–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å–û–±—Ä–∞–±–æ—Ç—á–∏–∫–°–æ–±—ã—Ç–∏—è("–ü—Ä–∏–û—Ç–∫—Ä—ã—Ç–∏–∏–°–æ–µ–¥–∏–Ω–µ–Ω–∏—è", –≠—Ç–æ—Ç–û–±—ä–µ–∫—Ç, "–ü—Ä–∏–û—Ç–∫—Ä—ã—Ç–∏–∏–°–æ–µ–¥–∏–Ω–µ–Ω–∏—è–í–µ–±–°–æ–∫–µ—Ç");
        –í–µ–±–°–æ–∫–µ—Ç.–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å–û–±—Ä–∞–±–æ—Ç—á–∏–∫–°–æ–±—ã—Ç–∏—è("–ü—Ä–∏–ó–∞–∫—Ä—ã—Ç–∏–∏–°–æ–µ–¥–∏–Ω–µ–Ω–∏—è", –≠—Ç–æ—Ç–û–±—ä–µ–∫—Ç, "–ü—Ä–∏–ó–∞–∫—Ä—ã—Ç–∏–∏–°–æ–µ–¥–∏–Ω–µ–Ω–∏—è–í–µ–±–°–æ–∫–µ—Ç");
        –í–µ–±–°–æ–∫–µ—Ç.–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å–û–±—Ä–∞–±–æ—Ç—á–∏–∫–°–æ–±—ã—Ç–∏—è("–ü—Ä–∏–û—à–∏–±–∫–µ", –≠—Ç–æ—Ç–û–±—ä–µ–∫—Ç, "–ü—Ä–∏–û—à–∏–±–∫–µ–í–µ–±–°–æ–∫–µ—Ç");
        
        // –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞
        –ü–æ–ª–Ω—ã–π–ê–¥—Ä–µ—Å = –ê–¥—Ä–µ—Å–°–µ—Ä–≤–µ—Ä–∞ + "/ws/devices/" + –¢–∏–ø–ü–æ–¥–ø–∏—Å–∫–∏;
        
        // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
        –í–µ–±–°–æ–∫–µ—Ç.–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è(–ü–æ–ª–Ω—ã–π–ê–¥—Ä–µ—Å);
        
        –°–æ—Å—Ç–æ—è–Ω–∏–µ–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è = "–ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è...";
        –û–±–Ω–æ–≤–∏—Ç—å–°–æ—Å—Ç–æ—è–Ω–∏–µ–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞();
        
        –î–æ–±–∞–≤–∏—Ç—å–í–ñ—É—Ä–Ω–∞–ª("–ò–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫: " + –ü–æ–ª–Ω—ã–π–ê–¥—Ä–µ—Å, "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è");
        
    –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
        
        –°–æ—Å—Ç–æ—è–Ω–∏–µ–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è = "–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è";
        –û–±–Ω–æ–≤–∏—Ç—å–°–æ—Å—Ç–æ—è–Ω–∏–µ–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞();
        
        –¢–µ–∫—Å—Ç–û—à–∏–±–∫–∏ = "–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ WebSocket: " + –û–ø–∏—Å–∞–Ω–∏–µ–û—à–∏–±–∫–∏();
        –î–æ–±–∞–≤–∏—Ç—å–í–ñ—É—Ä–Ω–∞–ª(–¢–µ–∫—Å—Ç–û—à–∏–±–∫–∏, "–û—à–∏–±–∫–∞");
        
        –ó–∞–ø–∏—Å—å–ñ—É—Ä–Ω–∞–ª–∞–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏("WebSocket.–û—à–∏–±–∫–∞–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è", 
            –£—Ä–æ–≤–µ–Ω—å–ñ—É—Ä–Ω–∞–ª–∞–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.–û—à–∏–±–∫–∞,
            ,
            ,
            –¢–µ–∫—Å—Ç–û—à–∏–±–∫–∏);
            
    –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
    
–ö–æ–Ω–µ—Ü–ü—Ä–æ—Ü–µ–¥—É—Ä—ã

// –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç WebSocket —Å–µ—Ä–≤–µ—Ä–∞
–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –û—Ç–∫–ª—é—á–∏—Ç—å—Å—è–û—Ç–°–µ—Ä–≤–µ—Ä–∞()
    
    –ï—Å–ª–∏ –í–µ–±–°–æ–∫–µ—Ç <> –ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –¢–æ–≥–¥–∞
        
        –ü–æ–ø—ã—Ç–∫–∞
            –í–µ–±–°–æ–∫–µ—Ç.–ó–∞–∫—Ä—ã—Ç—å();
            –î–æ–±–∞–≤–∏—Ç—å–í–ñ—É—Ä–Ω–∞–ª("–ò–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞", "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è");
        –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
            –î–æ–±–∞–≤–∏—Ç—å–í–ñ—É—Ä–Ω–∞–ª("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏: " + –û–ø–∏—Å–∞–Ω–∏–µ–û—à–∏–±–∫–∏(), "–û—à–∏–±–∫–∞");
        –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
        
    –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
    
    –°–æ—Å—Ç–æ—è–Ω–∏–µ–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è = "–û—Ç–∫–ª—é—á–µ–Ω–æ";
    –û–±–Ω–æ–≤–∏—Ç—å–°–æ—Å—Ç–æ—è–Ω–∏–µ–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞();
    
–ö–æ–Ω–µ—Ü–ü—Ä–æ—Ü–µ–¥—É—Ä—ã

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –û–±–Ω–æ–≤–∏—Ç—å–°–æ—Å—Ç–æ—è–Ω–∏–µ–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞()
    
    –≠–ª–µ–º–µ–Ω—Ç—ã–§–æ—Ä–º—ã.–°–æ—Å—Ç–æ—è–Ω–∏–µ–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è.–ó–Ω–∞—á–µ–Ω–∏–µ = –°–æ—Å—Ç–æ—è–Ω–∏–µ–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è;
    
    –ï—Å–ª–∏ –°–æ—Å—Ç–æ—è–Ω–∏–µ–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è = "–ü–æ–¥–∫–ª—é—á–µ–Ω–æ" –¢–æ–≥–¥–∞
        –≠–ª–µ–º–µ–Ω—Ç—ã–§–æ—Ä–º—ã.–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è–öWebSocket.–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å = –õ–æ–∂—å;
        –≠–ª–µ–º–µ–Ω—Ç—ã–§–æ—Ä–º—ã.–û—Ç–∫–ª—é—á–∏—Ç—å—Å—è–û—ÇWebSocket.–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å = –ò—Å—Ç–∏–Ω–∞;
        –≠–ª–µ–º–µ–Ω—Ç—ã–§–æ—Ä–º—ã.–ê–¥—Ä–µ—Å–°–µ—Ä–≤–µ—Ä–∞.–¢–æ–ª—å–∫–æ–ü—Ä–æ—Å–º–æ—Ç—Ä = –ò—Å—Ç–∏–Ω–∞;
        –≠–ª–µ–º–µ–Ω—Ç—ã–§–æ—Ä–º—ã.–¢–∏–ø–ü–æ–¥–ø–∏—Å–∫–∏.–¢–æ–ª—å–∫–æ–ü—Ä–æ—Å–º–æ—Ç—Ä = –ò—Å—Ç–∏–Ω–∞;
    –ò–Ω–∞—á–µ
        –≠–ª–µ–º–µ–Ω—Ç—ã–§–æ—Ä–º—ã.–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è–öWebSocket.–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å = –ò—Å—Ç–∏–Ω–∞;
        –≠–ª–µ–º–µ–Ω—Ç—ã–§–æ—Ä–º—ã.–û—Ç–∫–ª—é—á–∏—Ç—å—Å—è–û—ÇWebSocket.–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å = –õ–æ–∂—å;
        –≠–ª–µ–º–µ–Ω—Ç—ã–§–æ—Ä–º—ã.–ê–¥—Ä–µ—Å–°–µ—Ä–≤–µ—Ä–∞.–¢–æ–ª—å–∫–æ–ü—Ä–æ—Å–º–æ—Ç—Ä = –õ–æ–∂—å;
        –≠–ª–µ–º–µ–Ω—Ç—ã–§–æ—Ä–º—ã.–¢–∏–ø–ü–æ–¥–ø–∏—Å–∫–∏.–¢–æ–ª—å–∫–æ–ü—Ä–æ—Å–º–æ—Ç—Ä = –õ–æ–∂—å;
    –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
    
–ö–æ–Ω–µ—Ü–ü—Ä–æ—Ü–µ–¥—É—Ä—ã

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ –∂—É—Ä–Ω–∞–ª —Å–æ–æ–±—â–µ–Ω–∏–π
–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –î–æ–±–∞–≤–∏—Ç—å–í–ñ—É—Ä–Ω–∞–ª(–°–æ–æ–±—â–µ–Ω–∏–µ, –¢–∏–ø–°–æ–æ–±—â–µ–Ω–∏—è = "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è")
    
    –ù–æ–≤–∞—è–°—Ç—Ä–æ–∫–∞ = –≠–ª–µ–º–µ–Ω—Ç—ã–§–æ—Ä–º—ã.–ñ—É—Ä–Ω–∞–ª–°–æ–æ–±—â–µ–Ω–∏–π.–î–æ–±–∞–≤–∏—Ç—å();
    –ù–æ–≤–∞—è–°—Ç—Ä–æ–∫–∞.–í—Ä–µ–º—è = –¢–µ–∫—É—â–∞—è–î–∞—Ç–∞();
    –ù–æ–≤–∞—è–°—Ç—Ä–æ–∫–∞.–¢–∏–ø = –¢–∏–ø–°–æ–æ–±—â–µ–Ω–∏—è;
    –ù–æ–≤–∞—è–°—Ç—Ä–æ–∫–∞.–°–æ–æ–±—â–µ–Ω–∏–µ = –°–æ–æ–±—â–µ–Ω–∏–µ;
    
–ö–æ–Ω–µ—Ü–ü—Ä–æ—Ü–µ–¥—É—Ä—ã

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è()
    
    –ï—Å–ª–∏ –°—á–µ—Ç—á–∏–∫–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π < –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –¢–æ–≥–¥–∞
        
        –°—á–µ—Ç—á–∏–∫–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π = –°—á–µ—Ç—á–∏–∫–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π + 1;
        
        –î–æ–±–∞–≤–∏—Ç—å–í–ñ—É—Ä–Ω–∞–ª(–°—Ç—Ä–®–∞–±–ª–æ–Ω("–ü–æ–ø—ã—Ç–∫–∞ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è %1 –∏–∑ %2", 
            –°—á–µ—Ç—á–∏–∫–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π, –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π), "–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ");
        
        // –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö)
        –ó–∞–¥–µ—Ä–∂–∫–∞–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è = –°—á–µ—Ç—á–∏–∫–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π * 2;
        
        // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∞–π–º–µ—Ä –¥–ª—è –∑–∞–¥–µ—Ä–∂–∫–∏
        // –î–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –ø—Ä–∏–º–µ—Ä–∞ –¥–µ–ª–∞–µ–º –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
        –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è–ö–°–µ—Ä–≤–µ—Ä—É();
        
    –ò–Ω–∞—á–µ
        –î–æ–±–∞–≤–∏—Ç—å–í–ñ—É—Ä–Ω–∞–ª("–ü—Ä–µ–≤—ã—à–µ–Ω–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è", "–û—à–∏–±–∫–∞");
    –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
    
–ö–æ–Ω–µ—Ü–ü—Ä–æ—Ü–µ–¥—É—Ä—ã

#–ö–æ–Ω–µ—Ü–û–±–ª–∞—Å—Ç–∏

#–û–±–ª–∞—Å—Ç—å –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏–°–æ–±—ã—Ç–∏–πWebSocket

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–∫—Ä—ã—Ç–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –ü—Ä–∏–û—Ç–∫—Ä—ã—Ç–∏–∏–°–æ–µ–¥–∏–Ω–µ–Ω–∏—è–í–µ–±–°–æ–∫–µ—Ç()
    
    –°–æ—Å—Ç–æ—è–Ω–∏–µ–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è = "–ü–æ–¥–∫–ª—é—á–µ–Ω–æ";
    –°—á–µ—Ç—á–∏–∫–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π = 0; // –°–±—Ä–æ—Å —Å—á–µ—Ç—á–∏–∫–∞ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
    –û–±–Ω–æ–≤–∏—Ç—å–°–æ—Å—Ç–æ—è–Ω–∏–µ–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞();
    
    –î–æ–±–∞–≤–∏—Ç—å–í–ñ—É—Ä–Ω–∞–ª("WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ", "–£—Å–ø–µ—Ö");
    
    –ó–∞–ø–∏—Å—å–ñ—É—Ä–Ω–∞–ª–∞–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏("WebSocket.–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ", 
        –£—Ä–æ–≤–µ–Ω—å–ñ—É—Ä–Ω–∞–ª–∞–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è,
        ,
        ,
        "–£—Å–ø–µ—à–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ WebSocket —Å–µ—Ä–≤–µ—Ä—É");
        
–ö–æ–Ω–µ—Ü–ü—Ä–æ—Ü–µ–¥—É—Ä—ã

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–∫—Ä—ã—Ç–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –ü—Ä–∏–ó–∞–∫—Ä—ã—Ç–∏–∏–°–æ–µ–¥–∏–Ω–µ–Ω–∏—è–í–µ–±–°–æ–∫–µ—Ç(–ö–æ–¥–ó–∞–∫—Ä—ã—Ç–∏—è, –ü—Ä–∏—á–∏–Ω–∞–ó–∞–∫—Ä—ã—Ç–∏—è)
    
    –°–æ—Å—Ç–æ—è–Ω–∏–µ–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è = "–û—Ç–∫–ª—é—á–µ–Ω–æ";
    –û–±–Ω–æ–≤–∏—Ç—å–°–æ—Å—Ç–æ—è–Ω–∏–µ–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞();
    
    –¢–µ–∫—Å—Ç–°–æ–æ–±—â–µ–Ω–∏—è = –°—Ç—Ä–®–∞–±–ª–æ–Ω("WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–æ. –ö–æ–¥: %1, –ü—Ä–∏—á–∏–Ω–∞: %2", 
        –ö–æ–¥–ó–∞–∫—Ä—ã—Ç–∏—è, –ü—Ä–∏—á–∏–Ω–∞–ó–∞–∫—Ä—ã—Ç–∏—è);
    –î–æ–±–∞–≤–∏—Ç—å–í–ñ—É—Ä–Ω–∞–ª(–¢–µ–∫—Å—Ç–°–æ–æ–±—â–µ–Ω–∏—è, "–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ");
    
    // –ü–æ–ø—ã—Ç–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∏ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ–º —Ä–∞–∑—Ä—ã–≤–µ
    –ï—Å–ª–∏ –ö–æ–¥–ó–∞–∫—Ä—ã—Ç–∏—è <> 1000 –¢–æ–≥–¥–∞ // 1000 - –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ
        –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è();
    –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
    
–ö–æ–Ω–µ—Ü–ü—Ä–æ—Ü–µ–¥—É—Ä—ã

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫ WebSocket
–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –ü—Ä–∏–û—à–∏–±–∫–µ–í–µ–±–°–æ–∫–µ—Ç(–û–ø–∏—Å–∞–Ω–∏–µ–û—à–∏–±–∫–∏)
    
    –°–æ—Å—Ç–æ—è–Ω–∏–µ–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è = "–û—à–∏–±–∫–∞";
    –û–±–Ω–æ–≤–∏—Ç—å–°–æ—Å—Ç–æ—è–Ω–∏–µ–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞();
    
    –¢–µ–∫—Å—Ç–û—à–∏–±–∫–∏ = "–û—à–∏–±–∫–∞ WebSocket: " + –û–ø–∏—Å–∞–Ω–∏–µ–û—à–∏–±–∫–∏;
    –î–æ–±–∞–≤–∏—Ç—å–í–ñ—É—Ä–Ω–∞–ª(–¢–µ–∫—Å—Ç–û—à–∏–±–∫–∏, "–û—à–∏–±–∫–∞");
    
    –ó–∞–ø–∏—Å—å–ñ—É—Ä–Ω–∞–ª–∞–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏("WebSocket.–û—à–∏–±–∫–∞", 
        –£—Ä–æ–≤–µ–Ω—å–ñ—É—Ä–Ω–∞–ª–∞–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.–û—à–∏–±–∫–∞,
        ,
        ,
        –¢–µ–∫—Å—Ç–û—à–∏–±–∫–∏);
        
    // –ü–æ–ø—ã—Ç–∫–∞ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–µ
    –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è();
    
–ö–æ–Ω–µ—Ü–ü—Ä–æ—Ü–µ–¥—É—Ä—ã

// –û—Å–Ω–æ–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –û–±—Ä–∞–±–æ—Ç–∫–∞–°–æ–æ–±—â–µ–Ω–∏—è–í–µ–±–°–æ–∫–µ—Ç(–°–æ–æ–±—â–µ–Ω–∏–µ)
    
    –ü–æ–ø—ã—Ç–∫–∞
        
        // –ü–∞—Ä—Å–∏–Ω–≥ JSON —Å–æ–æ–±—â–µ–Ω–∏—è
        –ß—Ç–µ–Ω–∏–µJSON = –ù–æ–≤—ã–π –ß—Ç–µ–Ω–∏–µJSON;
        –ß—Ç–µ–Ω–∏–µJSON.–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å–°—Ç—Ä–æ–∫—É(–°–æ–æ–±—â–µ–Ω–∏–µ.–î–∞–Ω–Ω—ã–µ);
        –î–∞–Ω–Ω—ã–µ–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ = –ü—Ä–æ—á–∏—Ç–∞—Ç—åJSON(–ß—Ç–µ–Ω–∏–µJSON);
        
        // –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ = –î–∞–Ω–Ω—ã–µ–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.–ü–æ–ª—É—á–∏—Ç—å("device_id");
        –°—Ç–∞—Ç—É—Å–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ = –î–∞–Ω–Ω—ã–µ–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.–ü–æ–ª—É—á–∏—Ç—å("status");
        –†–µ–∑—É–ª—å—Ç–∞—Ç–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è = –î–∞–Ω–Ω—ã–µ–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.–ü–æ–ª—É—á–∏—Ç—å("result");
        –í—Ä–µ–º—è–û–±–Ω–æ–≤–ª–µ–Ω–∏—è = –î–∞–Ω–Ω—ã–µ–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.–ü–æ–ª—É—á–∏—Ç—å("updated_at");
        –ú–∞–∫–ê–¥—Ä–µ—Å = –î–∞–Ω–Ω—ã–µ–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.–ü–æ–ª—É—á–∏—Ç—å("mac_address");
        –°–µ—Ä–∏–π–Ω—ã–π–ù–æ–º–µ—Ä = –î–∞–Ω–Ω—ã–µ–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.–ü–æ–ª—É—á–∏—Ç—å("serial_number");
        
        // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
        –¢–µ–∫—Å—Ç–°–æ–æ–±—â–µ–Ω–∏—è = –°—Ç—Ä–®–∞–±–ª–æ–Ω("–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: %1, –°—Ç–∞—Ç—É—Å: %2, –†–µ–∑—É–ª—å—Ç–∞—Ç: %3", 
            –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –°—Ç–∞—Ç—É—Å–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –†–µ–∑—É–ª—å—Ç–∞—Ç–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è);
        –î–æ–±–∞–≤–∏—Ç—å–í–ñ—É—Ä–Ω–∞–ª(–¢–µ–∫—Å—Ç–°–æ–æ–±—â–µ–Ω–∏—è, "–î–∞–Ω–Ω—ã–µ");
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ç–∞—Ç—É—Å–∞
        –ï—Å–ª–∏ –°—Ç–∞—Ç—É—Å–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ = "success" –¢–æ–≥–¥–∞
            –û–±—Ä–∞–±–æ—Ç–∞—Ç—å–£—Å–ø–µ—à–Ω—ã–π–¢–µ—Å—Ç(–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –†–µ–∑—É–ª—å—Ç–∞—Ç–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –î–∞–Ω–Ω—ã–µ–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞);
            
        –ò–Ω–∞—á–µ–ï—Å–ª–∏ –°—Ç–∞—Ç—É—Å–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ = "fail" –¢–æ–≥–¥–∞
            –û–±—Ä–∞–±–æ—Ç–∞—Ç—å–ù–µ—É–¥–∞—á–Ω—ã–π–¢–µ—Å—Ç(–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –†–µ–∑—É–ª—å—Ç–∞—Ç–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –î–∞–Ω–Ω—ã–µ–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞);
            
        –ò–Ω–∞—á–µ–ï—Å–ª–∏ –°—Ç–∞—Ç—É—Å–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ = "error" –¢–æ–≥–¥–∞
            –û–±—Ä–∞–±–æ—Ç–∞—Ç—å–û—à–∏–±–∫—É–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞(–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –†–µ–∑—É–ª—å—Ç–∞—Ç–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –î–∞–Ω–Ω—ã–µ–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞);
            
        –ò–Ω–∞—á–µ–ï—Å–ª–∏ –°—Ç–∞—Ç—É—Å–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ = "online" –¢–æ–≥–¥–∞
            –û–±—Ä–∞–±–æ—Ç–∞—Ç—å–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞(–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –î–∞–Ω–Ω—ã–µ–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞);
            
        –ò–Ω–∞—á–µ–ï—Å–ª–∏ –°—Ç–∞—Ç—É—Å–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ = "offline" –¢–æ–≥–¥–∞
            –û–±—Ä–∞–±–æ—Ç–∞—Ç—å–û—Ç–∫–ª—é—á–µ–Ω–∏–µ–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞(–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –î–∞–Ω–Ω—ã–µ–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞);
            
        –ò–Ω–∞—á–µ
            –î–æ–±–∞–≤–∏—Ç—å–í–ñ—É—Ä–Ω–∞–ª(–°—Ç—Ä–®–∞–±–ª–æ–Ω("–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Å—Ç–∞—Ç—É—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞: %1", –°—Ç–∞—Ç—É—Å–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞), "–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ");
        –ö–æ–Ω–µ—Ü–ï—Å–ª–∏;
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–π –±–∞–∑–µ (–µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ)
        –û–±–Ω–æ–≤–∏—Ç—å–î–∞–Ω–Ω—ã–µ–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–í–ò–ë(–î–∞–Ω–Ω—ã–µ–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞);
        
    –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
        
        –¢–µ–∫—Å—Ç–û—à–∏–±–∫–∏ = "–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ WebSocket —Å–æ–æ–±—â–µ–Ω–∏—è: " + –û–ø–∏—Å–∞–Ω–∏–µ–û—à–∏–±–∫–∏();
        –î–æ–±–∞–≤–∏—Ç—å–í–ñ—É—Ä–Ω–∞–ª(–¢–µ–∫—Å—Ç–û—à–∏–±–∫–∏, "–û—à–∏–±–∫–∞");
        
        –ó–∞–ø–∏—Å—å–ñ—É—Ä–Ω–∞–ª–∞–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏("WebSocket.–û—à–∏–±–∫–∞–ü–∞—Ä—Å–∏–Ω–≥–∞", 
            –£—Ä–æ–≤–µ–Ω—å–ñ—É—Ä–Ω–∞–ª–∞–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.–û—à–∏–±–∫–∞,
            ,
            ,
            –¢–µ–∫—Å—Ç–û—à–∏–±–∫–∏ + –°–∏–º–≤–æ–ª—ã.–ü–° + "–ò—Å—Ö–æ–¥–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: " + –°–æ–æ–±—â–µ–Ω–∏–µ.–î–∞–Ω–Ω—ã–µ);
            
    –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
    
–ö–æ–Ω–µ—Ü–ü—Ä–æ—Ü–µ–¥—É—Ä—ã

#–ö–æ–Ω–µ—Ü–û–±–ª–∞—Å—Ç–∏

#–û–±–ª–∞—Å—Ç—å –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏–°—Ç–∞—Ç—É—Å–æ–≤–£—Å—Ç—Ä–æ–π—Å—Ç–≤

// –û–±—Ä–∞–±–æ—Ç–∫–∞ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–µ—Å—Ç–∞
–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –û–±—Ä–∞–±–æ—Ç–∞—Ç—å–£—Å–ø–µ—à–Ω—ã–π–¢–µ—Å—Ç(–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –†–µ–∑—É–ª—å—Ç–∞—Ç–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –î–∞–Ω–Ω—ã–µ–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)
    
    –î–æ–±–∞–≤–∏—Ç—å–í–ñ—É—Ä–Ω–∞–ª(–°—Ç—Ä–®–∞–±–ª–æ–Ω("‚úì –¢–µ—Å—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ %1 –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ: %2", 
        –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –†–µ–∑—É–ª—å—Ç–∞—Ç–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è), "–£—Å–ø–µ—Ö");
    
    // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—É—é –ª–æ–≥–∏–∫—É –¥–ª—è —É—Å–ø–µ—à–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
    // –ù–∞–ø—Ä–∏–º–µ—Ä, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –≤ —É—á–µ—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ
    
–ö–æ–Ω–µ—Ü–ü—Ä–æ—Ü–µ–¥—É—Ä—ã

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—É–¥–∞—á–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–µ—Å—Ç–∞
–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –û–±—Ä–∞–±–æ—Ç–∞—Ç—å–ù–µ—É–¥–∞—á–Ω—ã–π–¢–µ—Å—Ç(–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –†–µ–∑—É–ª—å—Ç–∞—Ç–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –î–∞–Ω–Ω—ã–µ–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)
    
    –î–æ–±–∞–≤–∏—Ç—å–í–ñ—É—Ä–Ω–∞–ª(–°—Ç—Ä–®–∞–±–ª–æ–Ω("‚úó –¢–µ—Å—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ %1 –∑–∞–≤–µ—Ä—à–µ–Ω —Å –æ—à–∏–±–∫–æ–π: %2", 
        –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –†–µ–∑—É–ª—å—Ç–∞—Ç–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è), "–û—à–∏–±–∫–∞");
    
    // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ—É–¥–∞—á–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
    // –ù–∞–ø—Ä–∏–º–µ—Ä, —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
    
–ö–æ–Ω–µ—Ü–ü—Ä–æ—Ü–µ–¥—É—Ä—ã

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –û–±—Ä–∞–±–æ—Ç–∞—Ç—å–û—à–∏–±–∫—É–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞(–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –†–µ–∑—É–ª—å—Ç–∞—Ç–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –î–∞–Ω–Ω—ã–µ–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)
    
    –î–æ–±–∞–≤–∏—Ç—å–í–ñ—É—Ä–Ω–∞–ª(–°—Ç—Ä–®–∞–±–ª–æ–Ω("‚ö† –û—à–∏–±–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ %1: %2", 
        –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –†–µ–∑—É–ª—å—Ç–∞—Ç–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è), "–û—à–∏–±–∫–∞");
    
    // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
    // –ù–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º—É –ø–µ—Ä—Å–æ–Ω–∞–ª—É
    
–ö–æ–Ω–µ—Ü–ü—Ä–æ—Ü–µ–¥—É—Ä—ã

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –û–±—Ä–∞–±–æ—Ç–∞—Ç—å–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞(–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –î–∞–Ω–Ω—ã–µ–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)
    
    –î–æ–±–∞–≤–∏—Ç—å–í–ñ—É—Ä–Ω–∞–ª(–°—Ç—Ä–®–∞–±–ª–æ–Ω("üîå –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ %1 –ø–æ–¥–∫–ª—é—á–µ–Ω–æ", –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞), "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è");
    
    // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤
    
–ö–æ–Ω–µ—Ü–ü—Ä–æ—Ü–µ–¥—É—Ä—ã

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –û–±—Ä–∞–±–æ—Ç–∞—Ç—å–û—Ç–∫–ª—é—á–µ–Ω–∏–µ–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞(–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –î–∞–Ω–Ω—ã–µ–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)
    
    –î–æ–±–∞–≤–∏—Ç—å–í–ñ—É—Ä–Ω–∞–ª(–°—Ç—Ä–®–∞–±–ª–æ–Ω("üîå –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ %1 –æ—Ç–∫–ª—é—á–µ–Ω–æ", –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞), "–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ");
    
    // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤
    
–ö–æ–Ω–µ—Ü–ü—Ä–æ—Ü–µ–¥—É—Ä—ã

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–π –±–∞–∑–µ
–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –û–±–Ω–æ–≤–∏—Ç—å–î–∞–Ω–Ω—ã–µ–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–í–ò–ë(–î–∞–Ω–Ω—ã–µ–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)
    
    // –ü—Ä–∏–º–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –ò–ë
    // –ó–¥–µ—Å—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤–∞—à–∞ –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
    
    /*
    –ü–æ–ø—ã—Ç–∫–∞
        
        –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ = –î–∞–Ω–Ω—ã–µ–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.–ü–æ–ª—É—á–∏—Ç—å("device_id");
        
        // –ü–æ–∏—Å–∫ –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
        –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–°—Å—ã–ª–∫–∞ = –ù–∞–π—Ç–∏–ò–ª–∏–°–æ–∑–¥–∞—Ç—å–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ(–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞);
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
        –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–û–±—ä–µ–∫—Ç = –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–°—Å—ã–ª–∫–∞.–ü–æ–ª—É—á–∏—Ç—å–û–±—ä–µ–∫—Ç();
        –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–û–±—ä–µ–∫—Ç.–°—Ç–∞—Ç—É—Å = –î–∞–Ω–Ω—ã–µ–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.–ü–æ–ª—É—á–∏—Ç—å("status");
        –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–û–±—ä–µ–∫—Ç.–†–µ–∑—É–ª—å—Ç–∞—Ç–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è = –î–∞–Ω–Ω—ã–µ–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.–ü–æ–ª—É—á–∏—Ç—å("result");
        –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–û–±—ä–µ–∫—Ç.–í—Ä–µ–º—è–ü–æ—Å–ª–µ–¥–Ω–µ–≥–æ–û–±–Ω–æ–≤–ª–µ–Ω–∏—è = –¢–µ–∫—É—â–∞—è–î–∞—Ç–∞();
        –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–û–±—ä–µ–∫—Ç.–ó–∞–ø–∏—Å–∞—Ç—å();
        
    –ò—Å–∫–ª—é—á–µ–Ω–∏–µ
        –î–æ–±–∞–≤–∏—Ç—å–í–ñ—É—Ä–Ω–∞–ª("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –ò–ë: " + –û–ø–∏—Å–∞–Ω–∏–µ–û—à–∏–±–∫–∏(), "–û—à–∏–±–∫–∞");
    –ö–æ–Ω–µ—Ü–ü–æ–ø—ã—Ç–∫–∏;
    */
    
–ö–æ–Ω–µ—Ü–ü—Ä–æ—Ü–µ–¥—É—Ä—ã

#–ö–æ–Ω–µ—Ü–û–±–ª–∞—Å—Ç–∏